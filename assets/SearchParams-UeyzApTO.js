import{j as e,b as u,c as x,r as c,A as j}from"./index-BCDLOhh2.js";import{u as m}from"./useQuery-DqdM_JF9.js";const b=async({queryKey:a})=>{const[,r]=a;return r?(await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${r}`)).json():[]},p=a=>m({queryKey:["breed",a],queryFn:b}),g=a=>e.jsxs(u,{to:`/Details/${a.id}`,className:"pet",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:a.images[0],alt:"Animal"})}),e.jsxs("div",{className:"info",children:[e.jsx("h1",{children:a.name}),e.jsx("h2",{children:`${a.animal} — ${a.breed} — ${a.location}`})]})]}),v=({pets:a})=>e.jsxs("div",{className:"search",children:[!a.length&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(x,{})}),a&&a.map(r=>e.jsx(g,{name:r.name,animal:r.animal,breed:r.breed,images:r.images,location:r.city,id:r.id},r.id))]}),f=async({queryKey:a})=>{const[,{animal:r,location:n,breed:i}]=a;return(await fetch(`https://pets-v2.dev-apis.com/pets?animal=${r}&location=${n}&breed=${i}`)).json()},y=a=>m({queryKey:["pet",a],queryFn:f});class q extends c.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){}render(){return this.state.hasError?e.jsx("h2",{children:"Something went wrong."}):this.props.children}}const E=["bird","cat","dog","rabbit","reptile"],A=()=>{var l,d;const[a,r]=c.useState({location:"",animal:"",breed:""}),n=p(a.animal),i=((l=n==null?void 0:n.data)==null?void 0:l.breeds)||[],s=y(a),h=(d=s==null?void 0:s.data)==null?void 0:d.pets,[o]=c.useContext(j);return e.jsxs("div",{children:[e.jsx("div",{className:"search-params",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),r({location:t.target.location.value,animal:t.target.animal.value,breed:t.target.breed.value})},children:[o&&e.jsx("div",{className:"pet image-container",children:e.jsx("img",{src:o.images[0],alt:o.name})}),e.jsxs("label",{htmlFor:"location",children:["Location:",e.jsx("input",{type:"text",name:"location",id:"location",placeholder:"Location",onChange:t=>{}})]}),e.jsxs("label",{htmlFor:"animal",children:["Animal:",e.jsx("select",{name:"animal",id:"animal",onChange:t=>{r({...a,animal:t.target.value})},children:E.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("label",{htmlFor:"breed",children:["Breed:",e.jsx("select",{name:"breed",id:"breed",disabled:!i.length,onChange:t=>{},children:i.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("button",{children:"Search"})]})}),s.isError&&e.jsx("span",{children:s.error}),s.data&&e.jsx(q,{children:e.jsx(v,{pets:h})})]})};export{A as default};
